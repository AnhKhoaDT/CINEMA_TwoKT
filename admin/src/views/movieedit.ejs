<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cập nhật phim</title>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- Bootstrap Icons -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
        <link rel="stylesheet" href="/Movie/Movie.css">
        <link rel="stylesheet" href="/sideBar.css">
    </head>    
    <body>
        <div class="layout-wrapper">
            <%- include('./components/sidebar') %> 
            <div class="movie-edit flex-grow-1 p-4">
                <h2 class="mb-4" >Chỉnh sửa phim</h2>
                <form id="edit-movie-form" ">
                    <input type="hidden" id="movie-id" name="movieId" value="<%= movie._id %>">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="edit-title" class="form-label">Tên phim</label>
                            <input type="text" class="form-control" id="edit-title" name="title" required>
                        </div>
                        <div class="col-md-6">
                            <label for="edit-genre" class="form-label">Thể loại</label>
                            <input type="text" class="form-control" id="edit-genre" name="genre" placeholder="Hành động, Hài..." required>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="edit-duration" class="form-label">Thời lượng (phút)</label>
                            <input type="number" class="form-control" id="edit-duration" name="duration" min="1" required>
                        </div>
                        <div class="col-md-6">
                            <label for="edit-nation" class="form-label">Quốc gia</label>
                            <input type="text" class="form-control" id="edit-nation" name="nation" required>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="edit-director" class="form-label">Đạo diễn</label>
                            <input type="text" class="form-control" id="edit-director" name="director" required>
                        </div>
                        <div class="col-md-6">
                            <label for="edit-cast" class="form-label">Danh sách diễn viên</label>
                            <input type="text" class="form-control" id="edit-cast" name="cast" placeholder="Diễn viên 1, Diễn viên 2..." required>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="edit-releaseDate" class="form-label">Ngày phát hành</label>
                            <input type="date" class="form-control" id="edit-releaseDate" name="releaseDate" required>
                        </div>
                        <div class="col-md-6">
                            <label for="edit-ageRestriction" class="form-label">Giới hạn độ tuổi</label>
                            <input type="text" class="form-control" id="edit-ageRestriction" name="ageRestriction" placeholder="PG-13, R..." required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="edit-synopsis" class="form-label">Tóm tắt nội dung</label>
                        <textarea class="form-control" id="edit-synopsis" name="synopsis" rows="4" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="edit-poster" class="form-label">Ảnh bìa (URL)</label>
                        <input type="url" class="form-control" id="edit-poster" name="poster" required>
                    </div>
                    <div class="mb-3">
                        <label for="status" class="form-label">Trạng thái</label>
                        <input type="text" class="form-control" id="status" name="status" required>
                    </div>
                    <div class="mb-3">
                        <label for="edit-trailer" class="form-label">Trailer (URL)</label>
                        <input type="url" class="form-control" id="edit-trailer" name="trailer" required>
                    </div>
                    <div class="d-flex justify-content-end">
                        <button type="submit" class="btn btn-primary">Cập nhật phim</button>
                    </div>
                </form>
            </div>  
        </div>                     
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="/Movie/MovieEdit.js"></script>    
        <script>
            document.getElementById("edit-title").value = "<%= movie.title %>";
            document.getElementById("edit-genre").value = "<%= movie.genre %>";
            document.getElementById("edit-duration").value = "<%= movie.duration %>";
            document.getElementById("edit-nation").value = "<%= movie.nation %>";
            document.getElementById("edit-director").value = "<%= movie.details.director %>";
            document.getElementById("edit-cast").value = "<%= movie.details.cast %>";
            document.getElementById("edit-releaseDate").value = "<%= movie.details.releaseDate.toISOString().slice(0, 10) %>";
            document.getElementById("edit-ageRestriction").value = "<%= movie.ageRestriction %>";
            document.getElementById("edit-synopsis").value = "<%= movie.synopsis %>";
            document.getElementById("edit-poster").value = "<%= movie.poster %>";
            document.getElementById("edit-trailer").value = "<%= movie.trailer %>";
            document.getElementById("status").value = "<%= movie.status %>";
        </script>        
    </body>
</html>